
<style>

    #map_rawan { position: absolute; width: 90%; height:80% }
</style>

<style>
body {
margin: 0;
padding: 0;
}

 
.marker {
background-image: url('http://localhost/polpp/public/assets2/img/logopolpp2.png');
background-size: cover;
width: 50px;
height: 50px;
border-radius: 50%;
cursor: pointer;
}
 
.mapboxgl-popup {
max-width: 200px;
}
 
.mapboxgl-popup-content {
text-align: center;
font-family: 'Open Sans', sans-serif;
}
</style>

<div id="map_rawan" ></div>


<script>


    function filterPetaRawan(){


        var e2 = document.getElementById("kecamatan_2");
        var value2 = e2.value;

        window.location = "{{URL::to('/')}}/report2?id_kegiatan=0&id_kecamatan="+value2;
        // console.log("{{URL::to('/')}}/report2?id_kegiatan="+e.value);

    }
    // TO MAKE THE MAP APPEAR YOU MUST
    // ADD YOUR ACCESS TOKEN FROM
    // https://account.mapbox.com
    mapboxgl.accessToken = 'pk.eyJ1IjoiYXJpZmFuZGlkZW5pIiwiYSI6ImNsMzZvNXZxejEzbHAzY3FzcmpuNzNrbm0ifQ.-XX0gvG2ooyVnJvZZHg9Hg';
    const map_rawan = new mapboxgl.Map({
        container: 'map_rawan',
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/light-v11',
        center:  [ 112.63345887962053,-7.978172827557862],
        zoom: 11.4
    });

    map_rawan.on('load', () => {
        // Add a geojson point source.
        // Heatmap layers also work with a vector tile source.
        map_rawan.addSource('earthquakes', {
            'type': 'geojson',
            'data': '{{URL::to('/')}}/json_heatmap_rawan?id_kecamatan={{$_GET['id_kecamatan']}}'
        });

       

        map_rawan.addSource('blimbing', {
            'type': 'geojson',
            'data': {
                'type': 'Feature',
                'geometry': {
                    'type': 'Polygon',
                    // These coordinates outline Maine.
                    'coordinates': [
                            [
                               [ 112.63544786616735 , -7.987140451422819],       
[ 112.63819452328183 , -7.988500455438672],       
[ 112.64044479654774 , -7.990679729485521],       
[ 112.64547481893264 , -7.993350553210035],       
[ 112.64679850916036 , -7.990515874687561],       
[ 112.64858549085273 , -7.987910574757265],       
[ 112.64944588952493 , -7.987042137697746],       
[ 112.64888332124187 , -7.984551515687749],       
[ 112.64997536558585 , -7.981733161903195],       
[ 112.65110050219982 , -7.978832858939782],       
[ 112.65062066454072 , -7.975014914628412],       
[ 112.65158033990595 , -7.974015361060154],       
[ 112.65285439161722 , -7.971278865940696],       
[ 112.65480683455742 , -7.970934754467281],       
[ 112.65440972753466 , -7.969263351846473],       
[ 112.65444898457372 , -7.967876216741875],       
[ 112.65644966373628 , -7.965744216594594],       
[ 112.65698785820425 , -7.965234388805226],       
[ 112.65780684965448 , -7.963971403673523],       
[ 112.65912893597733 , -7.963786011005951],       
[ 112.65951503195693 , -7.961514944314912],       
[ 112.66112961513025 , -7.960298296273398],   //cemplong   
[ 112.66236980218693 , -7.958988947180209],       
[ 112.66336095625168 , -7.958835981260939],       
[ 112.66372365247643 , -7.956634410622904],       
[ 112.66329186233405 , -7.956265462175958],       
[ 112.66273469034955 , -7.954315733612471],       
[ 112.66427619950196 , -7.949919613534647],       
[ 112.66347758635689 , -7.947933066814264],       
[ 112.66592914298258 , -7.946038480932955],       
[ 112.66626344615878 , -7.947086942161586],       
[ 112.66568770179974 , -7.948319340532243], 
[ 112.66687633531521 , -7.948926341354448],       
[ 112.66698776970729 , -7.946994971985537],       
[ 112.66802782403333 , -7.947160518287587],       
[ 112.66875214758181 , -7.945909722351812],       
[ 112.66739636245974 , -7.945265928774504],       
[ 112.66726635566897 , -7.943904762026431],       
[ 112.66498195063143 , -7.943297753778494],       
[ 112.66444335105955 , -7.940391459363743],       
[ 112.66559568260123 , -7.939293027614892],       
[ 112.66445560774672 , -7.937699844168435],       
[ 112.66493194038262 , -7.936593892828673],       
[ 112.66217235299922 , -7.932119149527860],       
[ 112.66274660014419 , -7.931112893141417],       
[ 112.66190731585542 , -7.927984732565884],       
[ 112.66312206943128 , -7.927306596716563],       
[ 112.66084716703998 , -7.925622189731888],       
[ 112.64975977968705 , -7.919650146443761],       
[ 112.65020150826013 , -7.918118839357176],       
[ 112.64554127181448 , -7.916346891195691],       
[ 112.64609343253079 , -7.913918653561609],       
[ 112.64445903681053 , -7.915121836159606],       
[ 112.64258148905314 , -7.918378436543231],       
[ 112.64282443976832 , -7.919647233448229],       
[ 112.64039493261663 , -7.920500387790105],       
[ 112.63902557388381 , -7.923278596123566],       
[ 112.63739117805781 , -7.926122412024027],       
[ 112.63911391949269 , -7.928397450554425],       
[ 112.63844950160797 , -7.954018354742288],       
[ 112.63750073237092 , -7.961417965828754],       
[ 112.63821230932972 , -7.967290577803987],       
[ 112.63848903382082 , -7.978174262708899],       
[ 112.63576132214544 , -7.986943639637801]            
                               
                            ]
                        ]
                }
            }
        });

// Add a new layer to visualize the polygon.
        map_rawan.addLayer({
            'id': 'blimbing',
            'type': 'fill',
            'source': 'blimbing', // reference the data source
            'layout': {},
            'paint': {
            'fill-color': '#f0633f', // blue color fill
            'fill-opacity': 0.8
            }
});
// Add a black outline around the polygon.
        map_rawan.addLayer({
            'id': 'outline_blimbing',
            'type': 'line',
            'source': 'blimbing',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 3
            }
        });


         map_rawan.addSource('klojen', {
            'type': 'geojson',
            'data': {
                'type': 'Feature',
                'geometry': {
                    'type': 'Polygon',
                    // These coordinates outline Maine.
                    'coordinates': [
                        [
                            [ 112.63662937897618, -7.960710681201059],    
                            [ 112.63822433903155, -7.966952555165193],       
                            [ 112.63837931975678, -7.977951485157971],       
                            [ 112.63331530936236, -7.993463687078322],       
                            [ 112.63082621946394, -7.992677466438559],       
                            [ 112.63069747343764, -7.991869994952792],       
                            [ 112.62859462167481, -7.991020023241737],       
                            [ 112.62636302388567, -7.996353566425656],       
                            [ 112.62563346287313, -7.996311068463581],       
                            [ 112.62501119041271, -7.998988438632425],       
                            [ 112.62284396563673, -7.998882194119397],       
                            [ 112.62273667728148, -7.998074734915711],       
                            [ 112.62348769576821, -7.997671004714283],       
                            [ 112.62391684918919, -7.996268570382675],       
                            [ 112.62357352645241, -7.994441148715246],       
                            [ 112.62245772753859, -7.992464974154152],       
                            [ 112.62235043918334, -7.989723813031401],       
                            [ 112.62228606616272, -7.988045108314684],       
                            [ 112.62307999999153, -7.987237627665434],       
                            [ 112.62222169314742, -7.985388915922467],       
                            [ 112.62295125396311, -7.983582695251192],       
                            [ 112.61962531445832, -7.983625194542095],       
                            [ 112.61374591259081, -7.983582695140432],       
                            [ 112.61449693107754, -7.981372720132901],       
                            [ 112.61222241794636, -7.977760235299812],       
                            [ 112.61320947086066, -7.971810190532268],       
                            [ 112.61222241799233, -7.971682688629398],       
                            [ 112.61241553705746, -7.968410126061424], 
                            [ 112.61316655554418, -7.965158788120136],       
                            [ 112.61278031746536, -7.963968749478211],       
                            [ 112.61417506617767, -7.964138755100997],       
                            [ 112.61934636490055, -7.966667582031216],       
                            [ 112.62061236749244, -7.964160005812546],       
                            [ 112.62147067433442, -7.963543734730283],       
                            [ 112.62091277488715, -7.961503658325511],       
                            [ 112.62147067433442, -7.959888590633461],       
                            [ 112.61593311528366, -7.956011855569887],       
                            [ 112.61644346758536, -7.955165242684852],       
                            [ 112.61674967894722, -7.952663301926465],       
                            [ 112.61538448649766, -7.951248055887333],       
                            [ 112.61659657321412, -7.950287707636043]
                            

                           
                            ]
                        ]
                }
            }
        });

// Add a new layer to visualize the polygon.
        map_rawan.addLayer({
            'id': 'klojen',
            'type': 'fill',
            'source': 'klojen', // reference the data source
            'layout': {},
            'paint': {
            'fill-color': '#8b0800', // blue color fill
            'fill-opacity': 0.9
            }
});
// Add a black outline around the polygon.
        map_rawan.addLayer({
            'id': 'outline_klojen',
            'type': 'line',
            'source': 'klojen',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 3
            }
        });





         map_rawan.addSource('lowokwaru', {
            'type': 'geojson',
            'data': {
                'type': 'Feature',
                'geometry': {
                    'type': 'Polygon',
                    // These coordinates outline Maine.
                    'coordinates': [
                        [
[112.63628736080631, -7.959920192218809],
[112.63730687039103, -7.958906856012719],       
[112.63874607883552, -7.952983809323565],       
[112.63897974705644,-7.930526977192752],      
[112.63974888895142, -7.927618133211146],       
[112.63691967311638, -7.925580180981584],       
[112.63900943487845, -7.923128256242526],       
[112.64013469117647, -7.920453412696321],       
[112.63055393720542, -7.911537141864418],       
[112.62769257092275, -7.911346076820696],       
[112.62428465184871, -7.913511475562371],       
[112.62090888283121, -7.917683020514542],       
[112.61849761917833, -7.918319893927308],       
[112.61750096351511, -7.919721011906579],       
[112.61071727529053, -7.919975760146011],       
[112.61107092722666, -7.923000883090851],       
[112.60965631920978, -7.923860650838952],       
[112.60271188034193, -7.921567932941511],       
[112.60017201570484, -7.923924337312581],       
[112.59959331246586, -7.921886366793925],       
[112.59731064968983, -7.922586920297581],       
[112.59602464229008, -7.919912073084999],       
[112.59232737159655, -7.917205364921281],       
[112.59126641565841, -7.917810395348336],       
[112.59358122861437, -7.919020453536675],       
[112.59341527281671, -7.922718621078248],       
[112.59699882012592, -7.923438117822399],       
[112.60030599396895, -7.926505432015124],       
[112.59919723064682, -7.930159671579294],       
[112.59762966851457, -7.929856730678069],       
[112.59892484727085, -7.935563917275789],       
[112.59624852157245, -7.937684469596093],       
[112.58519911958368, -7.936775662926229],       
[112.58496971987745, -7.937987404828716],       
[112.57392031828324, -7.935071644899754],       
[112.56951862091171, -7.936717095537284],       
[112.56888207982456, -7.938473328068485],       
[112.58625055821773, -7.947704683365601],       
[112.58943326365338, -7.946804072481137],       
[112.59889044551929, -7.950541594732648],       
[112.60048963213661, -7.949749149339041],       
[112.60118495279976, -7.951179320980683],       
[112.60388039500276, -7.949891886486328],       
[112.60263781534863, -7.953394456190965],       
[112.60776714495375, -7.954348288308229],       
[112.60622237590667, -7.958130540193039],       
[112.61923879082651, -7.966812096021216],
[112.62193182879832, -7.963529565426618],       
[112.62126330162346, -7.960145585861341],       
[112.61556335689414, -7.956144065289875],       
[112.61686327075078, -7.952723241412604],       
[112.61641758596755, -7.950148409018023],       

     
[112.63628736080631, -7.959920192218809]
                            

                           
                            ]
                        ]
                }
            }
        });

// Add a new layer to visualize the polygon.
        map_rawan.addLayer({
            'id': 'lowokwaru_fill',
            'type': 'fill',
            'source': 'lowokwaru', // reference the data source
            'layout': {},
            'paint': {
            'fill-color': '#ee1504', // blue color fill
            'fill-opacity': 0.8
            }
});
// Add a black outline around the polygon.
        map_rawan.addLayer({
            'id': 'outline_lowokwaru',
            'type': 'line',
            'source': 'lowokwaru',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 3
            }
        });





///////////////



         map_rawan.addSource('sukun', {
            'type': 'geojson',
            'data': {
                'type': 'Feature',
                'geometry': {
                    'type': 'Polygon',
                    // These coordinates outline Maine.
                    'coordinates': [
                        [   

                                       [ 112.59239788766487, -7.947909703245872],       
[ 112.59823091893161, -7.950165015987992],       
[ 112.60057504576784, -7.949665158373494],       
[ 112.60122414037508, -7.951019936880558],       
[ 112.60374541681297, -7.950074248824603],       
[ 112.60293745058118, -7.953330358196995],       
[ 112.60416645264154, -7.954423565107226],       
[ 112.60517165498175, -7.954498699499825],       
[ 112.60796346218476, -7.954239485809265],       
[ 112.60625739541575, -7.958085684608466],       
[ 112.60758092896084, -7.958486314204128],       
[ 112.60748571712607, -7.959539813770395],       
[ 112.60777463586021, -7.959601592987997],       
[ 112.60773852102812, -7.960232390720229],       
[ 112.60857244554053, -7.960804660001507],       
[ 112.60875301975243, -7.961897171836193],       
[ 112.61153579465966, -7.962016614707377],       
[ 112.61248845999111, -7.962689424899038],       
[ 112.61322248085207, -7.965071318753754],       
[ 112.61235335564861, -7.971719983851365],       
[ 112.61293805654282, -7.972017830688492],       
[ 112.61221078579587, -7.977781734332461],       
[ 112.61452734668667, -7.981519411129859],       
[ 112.61400374952031, -7.983620068224411],       
[ 112.62309412949314, -7.983501026684741],       
[ 112.62258071365671, -7.984699287522771],       
[ 112.62200646651173, -7.985585114946859],       
[ 112.62316600411947, -7.987695782459422],       
[ 112.62202855303345, -7.988155097275134],       
[ 112.62396629963362, -7.996116139117445],       
[ 112.62335226772998, -7.998046039228753],       
[ 112.62275880411805, -7.998216160243004],       
[ 112.62308677085095, -7.998912109107704],       
[ 112.62513265856582, -7.999004902199911],       
[ 112.62553871261609, -7.996422153248066],       
[ 112.62627273339928, -7.996561343728346],       
[ 112.62864658784703, -7.991040084924044],       
[ 112.63066124087321, -7.991875238132451],       
[ 112.63084865043487, -7.992942375827728],       
[ 112.63333182712692, -7.993437279318871],       
[ 112.63011194742091, -8.003848110541409],       
[ 112.63120776768459, -8.004087676895152],       
[ 112.63164949630061, -8.010583391318502],       
[ 112.63213539781245, -8.019244182577054],       
[ 112.63324350878612, -8.020452351370649],       
[ 112.63021766811256, -8.026947804495276],       
[ 112.62898082808601, -8.033399414430463],
[112.62189605413781, -8.029357759997268],       
[112.62214921870144, -8.028516676981122],       
[112.62060333320412, -8.027931395980211],       
[112.62064880042463, -8.027976417625604],       
[112.62087613652717, -8.027458668402353],       
[112.61773889831206, -8.026535722498375],       
[112.61876191077351, -8.023519250531967],       
[112.61343510048552, -8.020864007459511],       
[112.61345421709689, -8.019425355289778],       
[112.61557616106559, -8.019273917862483],       
[112.61802308732081, -8.016831982541479],       
[112.61706725675235, -8.015450105622374],       
[112.61878775179844, -8.011474817147764],       
[112.61655110826831, -8.009808970467207],       
[112.61337775065334, -8.014995788858986],       
[112.60829273180525, -8.018952113216756],       
[112.60798686602334, -8.017948838445193],       
[112.60689721917531, -8.017873119494084],       
[112.60653400355932, -8.015222947325944],       
[112.60724131815331, -8.012762057672392],       
[112.60105781674426, -8.006193478439156],       
[112.59657001154757, -8.005872220762184],       
[112.60122002657066, -7.992914616619105],       
[112.59966809369875, -7.991434645933642],       
[112.59817699801197, -7.995750883790361],       
[112.58873339127518, -7.992040436336581],       
[112.59130436227223, -7.986160189526411],       
[112.58844299625724, -7.985062495296791],       
[112.58181942787874, -7.986990135832845],       
[112.57819674175609, -7.984660902285237],       
[112.58165774140431, -7.980099373980723],       
[112.58939267705667, -7.982215190275211],       
[112.59207524306671, -7.984421492619004],       
[112.59800113446715, -7.984653441566547],       
[112.59920548098339, -7.981851602173238],       
[112.59769526868524, -7.981094344985008],       
[112.59853639958546, -7.979693415487620],       
[112.58951795677264, -7.975048471438938],       
[112.59097290782894, -7.973202340206215],       
[112.59924794196162, -7.974508141208945],       
[112.60006635193078, -7.971986590698026],       
[112.60288531960236, -7.971761451503748],       
[112.59752567451194, -7.962531331499771],       
[112.59929889632257, -7.956317300648209],       
[112.59002358333871, -7.955101501014388],       
[112.59075105884421, -7.949517782310451],       
[112.59170587047491, -7.949878024519141],       
[112.59270614932612, -7.948256932089387]                 

                           
                            ]
                        ]
                }
            }
        });

// Add a new layer to visualize the polygon.
        map_rawan.addLayer({
            'id': 'sukun_fill',
            'type': 'fill',
            'source': 'sukun', // reference the data source
            'layout': {},
            'paint': {
            'fill-color': '#fdab00', // blue color fill
            'fill-opacity': 0.8
            }
});
// Add a black outline around the polygon.
        map_rawan.addLayer({
            'id': 'outline_sukun',
            'type': 'line',
            'source': 'sukun',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 3
            }
        });


        /////////////////////////






///////////////



         map_rawan.addSource('kedungkandang', {
            'type': 'geojson',
            'data': {
                'type': 'Feature',
                'geometry': {
                    'type': 'Polygon',
                    // These coordinates outline Maine.
                    'coordinates': [
                        [   
                                           
                            [112.65712958480164, -7.9643695590482331],       
[112.66405835740903, -7.9680864267879981],       
[112.66340878497711, -7.9713029197072161],       
[112.66773926785671, -7.9687297273941541],       
[112.67672598490125, -7.9729061526104211],       
[112.67529699845659, -7.9749530949822581],       
[112.68099295697716, -7.9765300634625431],       
[112.68986367622934, -7.9749215583491531],       
[112.68830193015312, -7.9800563795474911],       
[112.69479879495752, -7.9824691045379661],       
[112.68455373891982, -8.0051727669221311],       
[112.67930627122435, -8.0050490451538411],       
[112.67836922341611, -8.0106165094398411],       
[112.67224717773493, -8.0088844175957731],       
[112.67237211744271, -8.0247204114428481],       
[112.67524573075895, -8.0282463107884431],       
[112.66393833953914, -8.0409806946383251],       
[112.66083185968137, -8.0402315533356341],       
[112.65526013994794, -8.0500148273500811],       
[112.63193320720667, -8.0463369325353221],       
[112.62814443726867, -8.0309629707460971],       
[112.63315558590715, -8.0217615887413081],       
[112.63572760030263, -7.9854673920000711],       
[112.64575845644511, -7.9925991383615544],       
[112.65784692410394, -7.9644534871469235],       
[112.65712958480164, -7.9643695590482331]
                           
                        ]
                                    ]
                }
            }
        });

// Add a new layer to visualize the polygon.
        map_rawan.addLayer({
            'id': 'kedungkandang_fill',
            'type': 'fill',
            'source': 'kedungkandang', // reference the data source
            'layout': {},
            'paint': {
            'fill-color': '#decb0f', // blue color fill
            'fill-opacity': 0.8
            }
});
// Add a black outline around the polygon.
        map_rawan.addLayer({
            'id': 'outline_kedungkandang',
            'type': 'line',
            'source': 'kedungkandang',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 3
            }
        });


        /////////////////////////

                const geojson = {
                'type': 'FeatureCollection',
                'features': [
                {
                'type': 'Feature',
                'geometry': {
                'type': 'Point',
                'coordinates': [112.62713415014285, -7.973523893145071]
                },
                'properties': {
                'title': 'Mapbox',
                'description': 'Klojen'
                }
                },
                {
                'type': 'Feature',
                'geometry': {
                'type': 'Point',
                'coordinates': [-122.414, 37.776]
                },
                'properties': {
                'title': 'Mapbox',
                'description': 'San Francisco, California'
                }
                }
                ]
                };


      
for (const feature of geojson.features) {
// create a HTML element for each feature
const el = document.createElement('div');
el.className = 'marker';
 
// make a marker for each feature and add it to the map
new mapboxgl.Marker(el)
.setLngLat(feature.geometry.coordinates)
.setPopup(
new mapboxgl.Popup({ offset: 25 }) // add popups
.setHTML(
`<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
)
)
.addTo(map_rawan);
}

    });



</script>